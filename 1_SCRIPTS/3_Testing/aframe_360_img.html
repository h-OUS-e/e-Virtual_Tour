<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>360 Image in A-Frame</title>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="button_test.js"></script>
    
</head>
<body>
    <a-scene id="scene">

        <a-camera raycaster>
            <a-cursor raycaster="objects: .clickable" fuse="false"></a-cursor>
        </a-camera>

        <!-- Loading in the initial image. -->
        <a-sky id="background_img" src="0_resources/stitched_panorama8.jpg" background_img_id="'1"></a-sky>
        
        <!-- Creating planes to play a video or show an image -->
        <a-plane id="myButton" class="clickable" position="-9.322 -6.298 19.005" rotation="0 150.000 0" width="5" height="3" color="#4CC3D9" material="opacity: 0.5;">
            <!-- Text Inside the Rectangle -->
            <a-text value="Your Text Here" align="center" position="0 0 0.01" color="black" scale="2 2 2"></a-text>
        </a-plane>


        <!-- Creating some buttons to move between 360 images. -->
        <a-entity id="move1" position="0 1.6 -4" class="clickable"
            geometry="primitive: ring; radiusInner: 0.02; radiusOuter: .5" material="color: #4CC3D9"
            event-set__click="_target: #imageSky; _delay: 300; src: url(0_resources/img3.jpg)"
            new_background_img_id= '2'
            background_img_id='1'
            myType='move'
            visible='true'
            >   
             
            <a-text value="MOVE" align="center" color="#FFF" position="0 1.2 -4"></a-text>
        </a-entity>

        <a-entity id="move2" position="3 1.6 -4" class="clickable"
            geometry="primitive: ring; radiusInner: 0.02; radiusOuter: .5" material="color: #4CC3D9"
            event-set__click="_target: #imageSky; _delay: 300; src: url(0_resources/stitched_panorama8.jpg)"
            new_background_img_id = '1'
            background_img_id='2'
            myType="move"
            visible='false'
            >    
            <a-text value="MOVE" align="center" color="#FFF" position="0 1.2 -4"></a-text>
        </a-entity>
        
    </a-scene>
    <!-- <script src="coord_find.js"></script> -->

    <script>
     



        // // Function to handle click event
        // function onEntityClick(event) {
        //     // Get the id of the clicked entity
        //     var clickedId = event.target.id;
        //     console.log('Clicked entity ID:', clickedId);
        //     var obj = document.getElementById(clickedId);
        //     var eventSetAttribute = obj.getAttribute('event-set__click');
        //     var background_img_id = obj.getAttribute('background_img_id');
        //     var new_background_img_id = obj.getAttribute('new_background_img_id');

        //     // Extract the URL from the attribute value
        //     var urlMatch = eventSetAttribute ? eventSetAttribute.match(/url\((.*?)\)/) : null;
        //     var url = urlMatch ? urlMatch[1] : "URL not found";
        //     console.log(url);


        //     // Changing background image
        //     var background_img = document.getElementById("background_img");
        //     background_img.setAttribute('src', url);
        //     background_img.setAttribute('background_img_id', new_background_img_id);
        //     console.log('Moved to new scene!');

        //     // Hide the transition icons olf
        //     var selector = '[background_img_id="' + background_img_id + '"][myType="move"]';
        //     var entitiesToHide = document.querySelectorAll(selector);
        //     // Iterate over the selected entities and hide them
        //     entitiesToHide.forEach(function(entity) {
        //         entity.setAttribute('visible', false);
        //         entity.removeEventListener('click', onEntityClick); // Remove previous event listener if any

        //     });
            
        //     // show transition icon of new background
        //     var selector2 = '[background_img_id="' + new_background_img_id + '"][myType="move"]';
        //     var entitiesToShow = document.querySelectorAll(selector2);
        //     // Iterate over the selected entities and hide them
        //     entitiesToShow.forEach(function(entity) {
        //         entity.setAttribute('visible', true);
        //         entity.addEventListener('click', onEntityClick); // add listener back
        //     });

        // }

        // // Attach event listeners to clickable entities
        // var clickableEntities = document.querySelectorAll('.clickable');
        // clickableEntities.forEach(function(entity) {
        //     entity.addEventListener('click', onEntityClick);
        // });
    </script>
</body>

</html>

